# ğŸ” x64dbg-APILogger

<div align="center">

![Platform](https://img.shields.io/badge/platform-Windows%20x64-0078D6?style=for-the-badge&logo=windows)
![SDK](https://img.shields.io/badge/SDK-x64dbg-green?style=for-the-badge)
![License](https://img.shields.io/badge/license-MIT-blue?style=for-the-badge)
![Status](https://img.shields.io/badge/status-Stable-success?style=for-the-badge)

**ä¸“ä¸º x64dbg è®¾è®¡çš„è½»é‡çº§ã€çº¿ç¨‹å®‰å…¨çš„ API ç›‘æ§ä¸å‚æ•°è§£ææ’ä»¶ã€‚**
è®©é€†å‘åˆ†æä¸­çš„å‚æ•°è¿½è¸ªå˜å¾—åƒé˜…è¯»æ—¥å¿—ä¸€æ ·ç®€å•ã€‚

[ä¸‹è½½æœ€æ–°ç‰ˆ](https://github.com/DubheStar/APILogger/Release) Â· [æŠ¥å‘Š Bug](https://github.com/DubheStar/APILogger/issues)

</div>

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§ (Features)

* **ğŸ–¥ï¸ å›¾å½¢åŒ–é…ç½®ç•Œé¢**: æŠ›å¼ƒç¹ççš„å‘½ä»¤è¡Œï¼Œé€šè¿‡åŸç”Ÿ Win32 GUI å‹¾é€‰ä½ æƒ³è¦ç›‘æ§çš„ APIã€‚
* **ğŸ§  æ™ºèƒ½å‚æ•°è§£æ**:
    * è‡ªåŠ¨è¯†åˆ«æŒ‡é’ˆå†…å®¹ã€‚
    * åŒºåˆ† **ANSI** (`char*`) ä¸ **Unicode** (`wchar_t*`) å­—ç¬¦ä¸²å¹¶è‡ªåŠ¨è§£ç æ˜¾ç¤ºã€‚
    * ä¸å†åªæ˜¾ç¤ºå†·å†°å†°çš„ `0x00007FF...` åœ°å€ã€‚
* **ğŸ§µ çº¿ç¨‹å®‰å…¨ä¸é€’å½’æ”¯æŒ**:
    * åŸºäº **TID (Thread ID)** çš„ç‹¬ç«‹è°ƒç”¨æ ˆç®¡ç†ã€‚
    * å®Œç¾å¤„ç†å¤šçº¿ç¨‹å¹¶å‘è°ƒç”¨å’Œå‡½æ•°é€’å½’ï¼Œè¿”å›å€¼ (`RAX`) æ°¸è¿œåŒ¹é…æ­£ç¡®çš„è°ƒç”¨è€…ã€‚
* **â†©ï¸ è¿”å›å€¼æ•è·**: è‡ªåŠ¨åœ¨å‡½æ•°è¿”å›åœ°å€ä¸‹æ–­ï¼Œè®°å½•å‡½æ•°æ‰§è¡Œç»“æœã€‚
* **ğŸ’¾ é…ç½®æŒä¹…åŒ–**: è‡ªåŠ¨ä¿å­˜ä½ çš„ç›‘æ§åˆ—è¡¨åˆ° `INI` æ–‡ä»¶ï¼Œæ— éœ€æ¯æ¬¡é‡å¯é‡å¤è®¾ç½®ã€‚
* **âš¡ é«˜æ€§èƒ½**: ä½¿ç”¨ä¸€æ¬¡æ€§æ–­ç‚¹å’Œé™é»˜è¿è¡Œæœºåˆ¶ï¼Œæœ€å°åŒ–å¯¹è°ƒè¯•ç›®æ ‡çš„å½±å“ã€‚

---

## ğŸ“¸ è¿è¡Œæˆªå›¾ (Screenshots)

> *ï¼ˆåœ¨æ­¤å¤„æ›¿æ¢ä¸ºä½ å®é™…è¿è¡Œæ’ä»¶æ—¶çš„æˆªå›¾ï¼Œå±•ç¤º Log çª—å£çš„è¾“å‡ºå’Œè®¾ç½®ç•Œé¢ï¼‰*

**æ—¥å¿—è¾“å‡ºç¤ºä¾‹:**
```text
[TID:1240] CALL MessageBoxW( 0x0, L"File not found", L"Error", 0x1 )
[TID:1240] RET  MessageBoxW -> 0x1
[TID:3048] CALL CreateFileW( L"C:\config.ini", 0x80000000, 0x1, 0x0 )
[TID:3048] RET  CreateFileW -> 0xFFFFFFFFFFFFFFFF
```

ğŸš€ å¿«é€Ÿå¼€å§‹ (Getting Started)
å®‰è£…
ä¸‹è½½æœ€æ–°çš„ release (.dp64 æ–‡ä»¶)ã€‚

å°†æ–‡ä»¶å¤åˆ¶åˆ° x64dbg çš„æ’ä»¶ç›®å½•ï¼š \x64dbg\release\x64\plugins\

å¯åŠ¨ x64dbgã€‚

ä½¿ç”¨æ–¹æ³•
æ‰“å¼€ x64dbg å¹¶é™„åŠ æˆ–åŠ è½½ç›®æ ‡ç¨‹åºã€‚

ç‚¹å‡»èœå•æ  Plugins -> APILogger_Pro -> Settings...ã€‚

åœ¨å¼¹å‡ºçš„çª—å£ä¸­å‹¾é€‰ä½ éœ€è¦ç›‘æ§çš„ APIï¼ˆå¦‚ MessageBoxW, CreateFileW ç­‰ï¼‰ã€‚

ç‚¹å‡» Applyã€‚

è¿è¡Œç¨‹åº (F9)ã€‚

è§‚å¯Ÿ Log çª—å£ï¼Œå‚æ•°å’Œè¿”å›å€¼å°†å®æ—¶æ‰“å°ã€‚

ğŸ› ï¸ ç¼–è¯‘æ„å»º (Build)
å¦‚æœä½ æƒ³è‡ªå·±ä¿®æ”¹ä»£ç ï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤ç¼–è¯‘ã€‚

ç¯å¢ƒè¦æ±‚
Visual Studio 2019 æˆ– 2022 (Communityç‰ˆå³å¯)

C++ Desktop Development Workload

é‡è¦: å¿…é¡»å®‰è£… x64 ç¼–è¯‘å·¥å…·é“¾

ç›®å½•ç»“æ„
ç¡®ä¿ä½ çš„æºç ç›®å½•ç»“æ„å¦‚ä¸‹ï¼Œå¦åˆ™æ— æ³•æ‰¾åˆ° SDKï¼š

Plaintext

ProjectRoot/
â”œâ”€â”€ APILogger.sln
â”œâ”€â”€ APILogger/
â”‚   â”œâ”€â”€ pluginmain.cpp
â”‚   â”œâ”€â”€ pluginmain.h
â”‚   â”œâ”€â”€ APILogger.vcxproj
â”‚   â””â”€â”€ pluginsdk/       <-- x64dbg SDK æ–‡ä»¶ç›´æ¥æ”¾åœ¨è¿™é‡Œ (æ‰å¹³åŒ–ç»“æ„)
â”‚       â”œâ”€â”€ _plugins.h
â”‚       â”œâ”€â”€ bridgemain.h
â”‚       â”œâ”€â”€ x64dbg.lib
â”‚       â””â”€â”€ ...

ç¼–è¯‘æ­¥éª¤
ä½¿ç”¨ Visual Studio æ‰“å¼€ APILogger.slnã€‚

å°†é¡¶éƒ¨é…ç½®è®¾ç½®ä¸º Releaseã€‚

å°†é¡¶éƒ¨å¹³å°è®¾ç½®ä¸º x64 (å¿…é¡»æ˜¯ x64!)ã€‚

ç‚¹å‡» ç”Ÿæˆ (Build) -> ç”Ÿæˆè§£å†³æ–¹æ¡ˆ (Build Solution)ã€‚

ç”Ÿæˆçš„æ’ä»¶ä½äº x64/Release/APILogger_Pro.dp64ã€‚

âš™ï¸ åŸç†ç®€è¿° (How it works)
æœ¬æ’ä»¶é€šè¿‡ä»¥ä¸‹é€»è¾‘å®ç°å¯¹ API çš„å®Œæ•´ç›‘æ§ï¼š

Entry Hook: åœ¨ API å…¥å£å¤„è®¾ç½®æ–­ç‚¹ã€‚

Context Capture: æ–­ç‚¹è§¦å‘æ—¶ï¼Œè¯»å– RCX, RDX, R8, R9 (x64 fastcall) å¹¶è§£æå†…å­˜å†…å®¹ã€‚

Return Prediction: è¯»å–æ ˆé¡¶ (RSP) è·å–è¿”å›åœ°å€ã€‚

Shadow Stack: å°† (API Name, Return Address) å‹å…¥å½“å‰çº¿ç¨‹ (TID) çš„ç§æœ‰æ ˆä¸­ã€‚

Exit Hook: åœ¨è¿”å›åœ°å€å¤„è®¾ç½®ä¸€æ¬¡æ€§æ–­ç‚¹ã€‚

Return Capture: å½“ç¨‹åºæ‰§è¡Œåˆ°è¿”å›åœ°å€ï¼Œæ£€æŸ¥çº¿ç¨‹æ ˆé¡¶ï¼ŒåŒ¹é…æˆåŠŸåˆ™è¯»å– RAX å¹¶æ‰“å°ã€‚

ğŸ¤ è´¡çŒ® (Contributing)
æ¬¢è¿æäº¤ Issue æˆ– Pull Requestï¼ å¦‚æœä½ æƒ³æ·»åŠ æ›´å¤šçš„é¢„è®¾ APIï¼Œè¯·ä¿®æ”¹ pluginmain.cpp ä¸­çš„ PRESET_APIS æ•°ç»„ã€‚

ğŸ“„ è®¸å¯è¯ (License)
æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦æƒ…è§ LICENSE æ–‡ä»¶ã€‚


---

### å¦‚ä½•è®©å®ƒçœ‹èµ·æ¥æ›´æ£’ï¼Ÿ

1.  **æ·»åŠ æˆªå›¾**ï¼šæˆ‘åœ¨æ–‡æ¡£é‡Œç•™äº† `> ï¼ˆåœ¨æ­¤å¤„æ›¿æ¢ä¸ºä½ å®é™…è¿è¡Œæ’ä»¶æ—¶çš„æˆªå›¾...ï¼‰` çš„ä½ç½®ã€‚è¯·åŠ¡å¿…åœ¨ x64dbg ä¸­è¿è¡Œä¸€ä¸‹æ’ä»¶ï¼Œæˆªå– **Log çª—å£**ï¼ˆå±•ç¤ºå½©è‰²æ—¥å¿—ï¼‰å’Œä½ çš„ **GUI è®¾ç½®çª—å£**ï¼ŒæŠŠå›¾ç‰‡ä¸Šä¼ åˆ° GitHub ä»“åº“å¹¶æ›¿æ¢é“¾æ¥ã€‚å›¾ç‰‡æ˜¯ README çš„çµé­‚ã€‚
2.  **åˆ›å»º Release**ï¼šåœ¨ GitHub ä¸Šåˆ›å»ºä¸€ä¸ª Releaseï¼ŒæŠŠç¼–è¯‘å¥½çš„ `.dp64` æ–‡ä»¶ä¸Šä¼ ä¸Šå»ï¼Œè¿™æ ·ç”¨æˆ·å¯ä»¥ç›´æ¥ä¸‹è½½ï¼Œä¸ç”¨è‡ªå·±ç¼–è¯‘ã€‚
3.  **ä¸Šä¼ ä»£ç **ï¼šç¡®ä¿ä½ ä¸Šä¼ ä»£ç æ—¶ï¼Œ**ä¸è¦**åŒ…å« `x64`ã€`Debug`ã€`Release` è¿™äº›ç¼–è¯‘ç”Ÿæˆçš„ä¸´æ—¶æ–‡
